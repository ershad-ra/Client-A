formatVersion: 1
name: TinyLinux
version: 1.0.0

inputs:
  hostname:
    type: string
    title: Hostname
    default: tiny-01

resources:
  net0:
    type: Cloud.vSphere.Network
    properties:
      networkType: existing
      # OPTIONAL: match the capability tag on your Network Profile or network
      # constraints:
      #   - tag: net:cloudnex

  vm:
    type: Cloud.vSphere.Machine
    properties:
      image: tinylinux         # your image mapping
      flavor: tiny             # your flavor mapping
      # OPTIONAL: scope to a cloud zone via capability tag
      # constraints:
      #   - tag: cloud:vsphere
      networks:
        - network: ${resource.net0.id}
          assignment: dhcp
      dnsDomain: cloudnex.lan

      # If your image has cloud-init, you can set hostname this way.
      # If not, remove cloudConfig and (optionally) use a vSphere customizationSpec instead.
      # cloudConfig: |
      #   #cloud-config
      #   hostname: ${input.hostname}

      # If you prefer vSphere Guest Customization instead of cloud-init:
      # customizationSpec: TinyLinux-Spec
